<template>
    <!-- Loading state -->
    <template lwc:if={isLoading}>
        <div class="loading-container">
            <lightning-spinner alternative-text="Loading documentation..." size="medium"></lightning-spinner>
            <p class="loading-text">Loading documentation...</p>
        </div>
    </template>

    <!-- Error state -->
    <template lwc:elseif={hasError}>
        <div class="error-container">
            <lightning-icon icon-name="utility:error" variant="error" size="large"></lightning-icon>
            <h2>Error Loading Documentation</h2>
            <p>{errorMessage}</p>
        </div>
    </template>

    <!-- Static resource fallback mode -->
    <template lwc:elseif={useStaticResource}>
        <c-docs-unlocked 
            content-resource-name={fallbackResourceName}
            display-header={displayHeader}
            header-label={headerLabel}
            display-footer={displayFooter}>
        </c-docs-unlocked>
    </template>

    <!-- Git-sourced content mode -->
    <template lwc:else>
        <!-- Version selector (if enabled) -->
        <template lwc:if={showVersionSelector}>
            <div class="version-selector">
                <lightning-combobox
                    name="version"
                    label="Version"
                    value={selectedRef}
                    placeholder="Select a version..."
                    options={versionPicklistOptions}
                    onchange={handleRefChange}>
                </lightning-combobox>
            </div>
        </template>

        <!-- The docs viewer -->
        <c-docs-unlocked
            display-header={displayHeader}
            header-label={headerLabel}
            display-footer={displayFooter}>
        </c-docs-unlocked>
    </template>
</template>
